<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.or.ddit.startup.test.mapper.TestMapper">

<!-- 테스트에 필요한 20개의 문항을 가져옴 -->
    <select id="getQuestions" resultType="kr.or.ddit.startup.test.vo.Test2QuestionsVO">
        SELECT 
            QUESTION_ID, 
            SECTION_ID, 
            QUESTION_TEXT
        FROM 
            TEST_2_QUESTIONS
        ORDER BY 
            QUESTION_ID
    </select>
    
<!-- 하나의 질문 ID를 입력받아, 그 질문에 속한 보기 3개를 가져옴 -->
    <select id="getOptions" parameterType="int" resultType="kr.or.ddit.startup.test.vo.Test3OptionsVO">
        SELECT 
            OPTION_ID, 
            QUESTION_ID, 
            OPTION_TEXT, 
            OPTION_SCORE
        FROM 
            TEST_3_OPTIONS
        WHERE 
            QUESTION_ID = #{questionId}
        ORDER BY 
            OPTION_ID
    </select>
    
<!-- 사용자가 선택한 여러개의 보기 ID를 한번에 입력받아, 해당하는 모든 보기 정보(점수포함)를 가져옴 -->
    <select id="getOptionsByIds" parameterType="java.util.List" resultType="kr.or.ddit.startup.test.vo.Test3OptionsVO">
        SELECT 
            OPTION_ID, 
            QUESTION_ID, 
            OPTION_TEXT, 
            OPTION_SCORE
        FROM 
            TEST_3_OPTIONS
        WHERE 
            OPTION_ID IN
            <foreach collection="list" item="optionId" open="(" separator="," close=")">
                #{optionId}
            </foreach>
    </select>
    
<!-- 테이블에 저장된 모든 섹션(영역)의 ID와 이름을 가져옴 -->   
    <select id="getSections" resultType="kr.or.ddit.startup.test.vo.Test1SectionsVO">
        SELECT
            SECTION_ID,
            SECTION_NAME
        FROM
            TEST_1_SECTIONS
        ORDER BY
            SECTION_ORDER
    </select>
   
</mapper>